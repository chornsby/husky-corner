{"version":3,"sources":["components/Footer.tsx","components/Navbar.tsx","components/icon.png","utils.ts","views/Convert.tsx","views/husky-frontpage.png","views/Home.tsx","index.tsx"],"names":["Footer","className","href","rel","target","React","Component","Navbar","to","alt","src","TIMESTAMP","convertStringToRows","inputContent","episode","length","Error","split","map","row","trim","filter","index","rowText","push","toLowerCase","console","log","i","test","replace","splice","convertRowToCells","readFileAsText","inputFile","reader","FileReader","Promise","resolve","reject","onerror","abort","DOMException","onload","result","readAsText","Convert","props","onDownloadClicked","outputWorkbook","workbook","XLSX","utils","book_new","rows","worksheet","aoa_to_sheet","book_append_sheet","convertToWorkbook","state","filename","outputFilename","writeFile","e","setState","inputFilename","alert","message","onFileChanged","event","a","files","name","type","onChange","this","placeholder","value","onClick","Home","HuskyFrontpage","style","maxHeight","ReactDOM","render","path","component","exact","document","getElementById"],"mappings":"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","file":"static/js/main.f6ad0a22.chunk.js","sourcesContent":["import React from \"react\";\n\nclass Footer extends React.Component {\n  render() {\n    return (\n      <footer className=\"footer\">\n        <div className=\"container\">\n          <div className=\"content has-text-centered\">\n            <strong>Husky Corner</strong> by{\" \"}\n            <a\n              href=\"https://gitlab.com/chornsby\"\n              rel=\"noopener noreferrer\"\n              target=\"_blank\"\n            >\n              chornsby\n            </a>\n          </div>\n        </div>\n      </footer>\n    );\n  }\n}\n\nexport default Footer;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport Favicon from \"./icon.png\";\n\nclass Navbar extends React.Component {\n  render() {\n    return (\n      <nav className=\"navbar\">\n        <div className=\"navbar-brand\">\n          <Link className=\"navbar-item\" to=\"/\">\n            <img alt=\"Husky Corner\" src={Favicon} />\n          </Link>\n        </div>\n        <Link className=\"navbar-item\" to=\"/\">\n          Husky Corner\n        </Link>\n        <Link className=\"navbar-item\" to=\"/convert/\">\n          Convert to Excel\n        </Link>\n      </nav>\n    );\n  }\n}\n\nexport default Navbar;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAFVBMVEUAAAAAAAD/////vdWUlJSMyP//lr1yf9crAAAAAXRSTlMAQObYZgAAAAFiS0dEAmYLfGQAAAAHdElNRQfiBx0JBzjvmVatAAAAXElEQVQI11WN0QnAMAhELxtEIQPUSgdoNhBXyALdf4he7FcfnDxOUKCBdEY52sGcHHp3tLllloh8kmRLRqbnlgzPkhW+Skb4+K3CDjWnWME/aiLG66yuZxeAEOAF8uIO2KUp66UAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDctMjlUMDk6MDc6NTYtMDc6MDCFtJ32AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTA3LTI5VDA5OjA3OjU2LTA3OjAw9OklSgAAAABJRU5ErkJggg==\"","import XLSX from \"xlsx\";\n\n/**\n * A possibly-malformed timestamp where a \":\" has been replaced with a \".\".\n */\nconst TIMESTAMP = /(\\d{2}[.:]){2,}\\d{2}/;\n\n/**\n * Convert a string into an array of columns for a single row in the output.\n */\nconst convertRowToCells = (\n  rowText: string,\n  index: number,\n  episode?: string\n) => {\n  // Split using the delimiter as specified in the program\n  const row = rowText.split(\"<\");\n\n  // Do not modify the header row\n  if (index > 0) {\n    // Grow the row to a minimum size\n    while (row.length < 4) {\n      row.push(\"\");\n    }\n\n    // Validate that the timestamp is not missing\n    if (row[1].length === 0) {\n      // But it _can_ be missing for the synopsis!\n      if (row[0].toLowerCase() === \"syno\") {\n        console.log(\"Ignoring missing timestamp for synopsis\");\n      } else {\n        throw new Error(`Check missing timestamp: ${rowText}`);\n      }\n    }\n\n    // Fix timestamps in initial 3 cells\n    for (let i = 0; i < 3; i++) {\n      if (TIMESTAMP.test(row[i])) {\n        row[i] = row[i].replace(\".\", \":\");\n      }\n    }\n\n    // Add in the episode number if it is given\n    if (episode) {\n      row.splice(3, 1, episode);\n    }\n  }\n\n  return row;\n};\n\n/**\n * Convert a string into an array of rows and columns to write into a workbook.\n */\nconst convertStringToRows = (inputContent: string, episode?: string) => {\n  if (!inputContent.length) {\n    throw new Error(\"Choose a text file\");\n  }\n  return inputContent\n    .split(\"\\n\")\n    .map((row) => row.trim())\n    .filter((row) => row)\n    .map((row, index) => convertRowToCells(row, index, episode));\n};\n\n/**\n * Return an XLSX Workbook from the input file and options.\n */\nconst convertToWorkbook = (\n  inputContent: string,\n  episode: string\n): XLSX.WorkBook => {\n  const workbook = XLSX.utils.book_new();\n  const rows = convertStringToRows(inputContent, episode);\n  const worksheet = XLSX.utils.aoa_to_sheet(rows);\n\n  XLSX.utils.book_append_sheet(workbook, worksheet);\n\n  return workbook;\n};\n\n/**\n * Use the XLSX library to download the given workbook.\n *\n * http://sheetjs.com/demos/table.html\n */\nconst downloadWorkbook = (workbook: XLSX.WorkBook, filename: string) => {\n  return XLSX.writeFile(workbook, filename);\n};\n\n/**\n * Wrap FileReader so it's easy to use with async-await syntax.\n *\n * https://blog.shovonhasan.com/using-promises-with-filereader/\n */\nconst readFileAsText = (inputFile: Blob): Promise<string> => {\n  const reader = new FileReader();\n\n  return new Promise((resolve, reject) => {\n    reader.onerror = () => {\n      reader.abort();\n      reject(new DOMException(\"Problem parsing input file.\"));\n    };\n\n    reader.onload = () => {\n      resolve(reader.result as string);\n    };\n\n    reader.readAsText(inputFile);\n  });\n};\n\nexport {\n  convertRowToCells,\n  convertStringToRows,\n  convertToWorkbook,\n  downloadWorkbook,\n  readFileAsText,\n};\n","import React from \"react\";\n\nimport { convertToWorkbook, downloadWorkbook, readFileAsText } from \"../utils\";\n\ntype Props = {};\n\ntype State = {\n  episode: string;\n  inputContent: string;\n  inputFilename: string;\n  outputFilename: string;\n};\n\nclass Convert extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      episode: \"\",\n      inputContent: \"\",\n      inputFilename: \"\",\n      outputFilename: \"output.xlsx\",\n    };\n  }\n\n  onDownloadClicked = () => {\n    try {\n      const outputWorkbook = convertToWorkbook(\n        this.state.inputContent,\n        this.state.episode\n      );\n      downloadWorkbook(outputWorkbook, this.state.outputFilename);\n    } catch (e) {\n      this.setState({\n        ...this.state,\n        inputContent: \"\",\n        inputFilename: \"\",\n      });\n      if (e instanceof Error) {\n        alert(e.message);\n      }\n    }\n  };\n\n  onFileChanged = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const target = event.target as HTMLInputElement;\n    if (!target.files) return;\n    const inputFile = target.files[0];\n    this.setState({\n      ...this.state,\n      inputContent: await readFileAsText(inputFile),\n      inputFilename: inputFile.name,\n    });\n  };\n\n  render() {\n    return (\n      <section className=\"section\">\n        <div className=\"container\">\n          <h1 className=\"title\">Upload a file</h1>\n          <p>\n            This utility converts a file of text separated with{\" \"}\n            <code>&lt;</code> characters into separate columns in an Excel\n            spreadsheet.\n          </p>\n          <br />\n          <div className=\"field\">\n            <label className=\"label\">Text file</label>\n            <div className=\"file has-name is-fullwidth\">\n              <label className=\"file-label\">\n                <input\n                  className=\"file-input\"\n                  type=\"file\"\n                  onChange={this.onFileChanged}\n                />\n                <span className=\"file-cta\">\n                  <span className=\"file-label\">Choose a file</span>\n                </span>\n                <span className=\"file-name\">{this.state.inputFilename}</span>\n              </label>\n            </div>\n          </div>\n          <div className=\"field\">\n            <label className=\"label\">Excel filename</label>\n            <div className=\"control\">\n              <input\n                className=\"input\"\n                placeholder=\"Optional\"\n                type=\"text\"\n                onChange={(event) =>\n                  this.setState({\n                    ...this.state,\n                    outputFilename: event.target.value,\n                  })\n                }\n                value={this.state.outputFilename}\n              />\n            </div>\n          </div>\n          <div className=\"field\">\n            <label className=\"label\">Episode</label>\n            <div className=\"control\">\n              <input\n                className=\"input\"\n                placeholder=\"Optional\"\n                type=\"text\"\n                onChange={(event) =>\n                  this.setState({ ...this.state, episode: event.target.value })\n                }\n                value={this.state.episode}\n              />\n            </div>\n          </div>\n          <div className=\"field\">\n            <div className=\"control\">\n              <button\n                className=\"button is-primary\"\n                onClick={this.onDownloadClicked}\n              >\n                Download\n              </button>\n            </div>\n          </div>\n        </div>\n      </section>\n    );\n  }\n}\n\nexport default Convert;\n","export default __webpack_public_path__ + \"static/media/husky-frontpage.d5f4b6b2.png\";","import React from \"react\";\n\nimport HuskyFrontpage from \"./husky-frontpage.png\";\n\nclass Home extends React.Component {\n  render() {\n    return (\n      <section className=\"hero is-info is-bold\">\n        <div className=\"hero-body\">\n          <div className=\"container\">\n            <div className=\"columns is-vcentered\">\n              <div className=\"column\">\n                <h1 className=\"title\">Welcome to Husky Corner</h1>\n                <h2 className=\"subtitle\">\n                  This good boy will help you with what you need to do.\n                </h2>\n              </div>\n              <div className=\"column\">\n                <img\n                  alt=\"The good boy\"\n                  src={HuskyFrontpage}\n                  style={{ maxHeight: \"50%\" }}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n    );\n  }\n}\n\nexport default Home;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { HashRouter as Router, Route } from \"react-router-dom\";\nimport \"bulma/css/bulma.css\";\n\nimport Footer from \"./components/Footer\";\nimport Navbar from \"./components/Navbar\";\nimport Convert from \"./views/Convert\";\nimport Home from \"./views/Home\";\n\nReactDOM.render(\n  <Router>\n    <Navbar />\n    <Route path=\"/\" component={Home} exact />\n    <Route path=\"/convert/\" component={Convert} />\n    <Footer />\n  </Router>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}